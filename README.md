# gopic_captcha

```
Golang 1.7
jQuery 1.9
```

## 工作流程
1. 根据一个固定大小的图片，和一个蒙版图片进行混合，生成一个重新排序的图片（还包括在mask进行图像混合时的横向坐标x）。

![后台返回给前台的图片](https://github.com/healerkx/gopic_captcha/blob/master/src/server/static/pictures/wall_32a2c53595b62bf49ff392a1da8c9500.png?raw=true)

```
                ||
                || (后端) 上面的图片根据一张原图+一张边缘带有半透明渐变效果的PNG在后端进行Alpha混合后，
                || (后端) 并且划分为13*2个区域重排序后生成的，然后发给前端。
                || (前端) 前端根据返回的index，重新在div中重新排序再Render成一张正常的图片+镂空的空白区域，
                || (前端) 用户移动滑块，到镂空区域后松开鼠标，然后ajax发送移动位置给后端。
                || (后端) 后端验证收到的位置信息，判断是否和混合的位置吻合，然后将校验结果返回给前端。
                \/
```

![前台渲染出来的图片](https://github.com/healerkx/gopic_captcha/blob/master/src/server/static/pictures/example.png?raw=true)

2. 用户拖动小图，直到放开鼠标时，发送横向坐标x给服务端进行判断是否和混合的位置吻合。

## TODO:
```
1. 图片缓存，目前的实现是每一次刷新页面都会生成一组新的图片和位置信息。
2. 其他操作行为的检测，目前只是校验了水平的位置，但是拖动的速度等等信息都没有校验。想要区分出来是人的操作，还是脚本的，我觉得还是等我把高数复习到了60分再说吧。
```

注：这只是一个模仿"极限验证"的例子，距离商用还有一定的距离。
